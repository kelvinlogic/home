(function(){"use strict";angular.module("fc.configuration").controller("LanguageConfigCtrl",n);n.$inject=["lodash","$modal","$scope","$state","appConfig","configSvc","dataContextSvc","langSvc"];function n(n,e,t,a,o,l,c,u){var g=this;g.activate=i;g.defaultLanguages=[];g.languages=[];g.titleKey="fc.configuration.language.PAGE_TITLE";i();function i(){c.getConfig().then(function(n){if(n.language.completed){var t=e.open({templateUrl:"common/modal.template.html",controller:"ModalTemplateCtrl as modalCtrl",resolve:{data:function(){return{bodyTextKey:"fc.configuration.language.configCompleteModal.COMPLETE_MODAL_CONTENT",cancelKey:"fc.NO_TEXT",okKey:"fc.YES_TEXT",titleKey:"fc.configuration.language.configCompleteModal.COMPLETE_MODAL_TITLE"}}}});t.result.then(function(){f()},function(){a.go("hierarchy-config")})}else{f()}})}function f(e){u.getLanguages().then(function(e){g.defaultLanguages=n.filter(e,function(n){return n.default});var a=l.config.language.languages;g.languages=n(e).filter(function(n){return!n.default}).map(function(e){if(n.some(a,{code:e.code})){e.selected=true}return e}).value();t.$on(o.languageChanged,function(n,e){f(e)})})}function r(){}}})();