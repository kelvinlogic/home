(function(){"use strict";angular.module("fc.configuration").controller("LanguageConfigCtrl",e);e.$inject=["lodash","$modal","$scope","$state","appConfig","configSvc","langSvc"];function e(e,n,t,a,o,l,u){var c=this;c.activate=g;c.defaultLanguages=[];c.languages=[];c.titleKey="fc.configuration.language.PAGE_TITLE";g();function g(){t.$on(o.languageChanged,i)}function i(){l.getConfig().then(function(e){if(e.language.completed){var t=n.open({templateUrl:"common/modal.template.html",controller:"ModalTemplateCtrl as modalCtrl",resolve:{data:function(){return{bodyTextKey:"fc.configuration.language.configCompleteModal.COMPLETE_MODAL_CONTENT",cancelKey:"fc.NO_TEXT",okKey:"fc.YES_TEXT",titleKey:"fc.configuration.language.configCompleteModal.COMPLETE_MODAL_TITLE"}}}});t.result.then(function(){f(e)},function(){a.go("hierarchy-config")})}else{f(e)}})}function f(n){u.getLanguages().then(function(t){c.defaultLanguages=e.filter(t,function(e){return e.default});var a=n.language.languages;c.languages=e(t).filter(function(e){return!e.default}).map(function(n){if(e.some(a,{code:n.code})){n.selected=true}return n}).value()})}function r(){}}})();