(function(){"use strict";angular.module("fc.startup").controller("LanguageConfigCtrl",e);e.$inject=["lodash","$modal","$scope","$state","appConfig","configSvc","dataContextSvc","langSvc"];function e(e,t,n,a,o,l,c,u){var g=this;g.activate=f;g.defaultLanguages=[];g.languages=[];g.titleKey="fc.startup.config.language.PAGE_TITLE";f();function f(){c.getConfig().then(function(e){if(e.language.completed){var n=t.open({templateUrl:"common/modal.template.html",controller:"ModalTemplateCtrl as modalCtrl",resolve:{data:function(){return{bodyTextKey:"fc.startup.config.language.configCompleteModal.COMPLETE_MODAL_CONTENT",cancelKey:"fc.NO_TEXT",okKey:"fc.YES_TEXT",titleKey:"fc.startup.config.language.configCompleteModal.COMPLETE_MODAL_TITLE"}}}});n.result.then(function(){i()},function(){a.go("hierarchy-config")})}else{i()}})}function i(t){u.getLanguages().then(function(t){g.defaultLanguages=e.filter(t,function(e){return e.default});var a=l.config.language.languages;g.languages=e(t).filter(function(e){return!e.default}).map(function(t){if(e.some(a,{code:t.code})){t.selected=true}return t}).value();n.$on(o.languageChanged,function(e,t){i(t)})})}function r(){}}})();