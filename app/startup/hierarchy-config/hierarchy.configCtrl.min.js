(function(){"use strict";angular.module("fc.startup").controller("HierarchyConfigCtrl",e);e.$inject=["$scope","appConfig","configSvc","dataContextSvc","lodash"];function e(e,n,t,l,i){var a=this;var r=9;var c=2;a.activate=o;a.addLevelAfter=u;a.canAddLevelAfter=v;a.canRemoveLevel=f;a.levels=null;a.removeLevel=d;a.titleKey="fc.startup.config.hierarchy.PAGE_TITLE";a.validate=g;a.validLevel=h;o();function o(){e.$on(n.languageChanged,function(e,n){s(n)})}function u(e){if(!v(e)||!h(e)){return}var n={open:true,data:{}};var t=a.levels.indexOf(e);t++;a.levels.splice(t,0,n)}function v(e){var n=false;if(!e||e.pin===c){return n}n=a.levels.length<r&&e.pin!==c;return n}function f(e){return!e.pin}function s(e){l.getConfig().then(function(){a.levels=t.config.hierarchy.levels;a.levels[0].open=true})}function d(e){if(!f(e)){return}var n=a.levels.indexOf(e);a.levels.splice(n,1)}function p(){}function g(){return i.all(a.levels,function(e){return a.validLevel(e)})}function h(e){return Boolean(e.description&&e.data&&e.data.name&&e.data.code)}}})();