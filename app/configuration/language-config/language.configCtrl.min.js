(function(){"use strict";angular.module("fc.configuration").controller("LanguageConfigCtrl",e);e.$inject=["lodash","$modal","$scope","$state","appConfig","configSvc","dataContextSvc","langSvc"];function e(e,n,t,a,o,l,c,u){var g=this;g.activate=f;g.defaultLanguages=[];g.languages=[];g.titleKey="fc.startup.config.language.PAGE_TITLE";f();function f(){c.getConfig().then(function(e){if(e.language.completed){var t=n.open({templateUrl:"common/modal.template.html",controller:"ModalTemplateCtrl as modalCtrl",resolve:{data:function(){return{bodyTextKey:"fc.startup.config.language.configCompleteModal.COMPLETE_MODAL_CONTENT",cancelKey:"fc.NO_TEXT",okKey:"fc.YES_TEXT",titleKey:"fc.startup.config.language.configCompleteModal.COMPLETE_MODAL_TITLE"}}}});t.result.then(function(){i()},function(){a.go("hierarchy-config")})}else{i()}})}function i(n){u.getLanguages().then(function(n){g.defaultLanguages=e.filter(n,function(e){return e.default});var a=l.config.language.languages;g.languages=e(n).filter(function(e){return!e.default}).map(function(n){if(e.some(a,{code:n.code})){n.selected=true}return n}).value();t.$on(o.languageChanged,function(e,n){i(n)})})}function r(){}}})();